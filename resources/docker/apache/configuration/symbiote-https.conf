<VirtualHost *:443>
  ServerName [[docker.hostname]]
  DocumentRoot /var/www

  SSLEngine On
  SSLProxyEngine On

  SSLCertificateFile    /etc/certs/cert.pem
  SSLCertificateKeyFile /etc/certs/privkey.pem
  SSLCertificateChainFile /etc/certs/chain.pem

  <Proxy *>
	Require all granted
  </Proxy>

  RewriteEngine on 

  RewriteRule ^/coreInterface$ 		/coreInterface/ [R]
  RewriteRule ^/cloudCoreInterface$ 	/cloudCoreInterface/ [R]

  ProxyRequests		Off
  ProxyVia		Off
  ProxyPreserveHost	On
  ProxyHTMLEnable	On

  ProxyPass        	/coreInterface/          	https://symbiote.man.poznan.pl:8100/
  ProxyPassReverse 	/coreInterface/          	https://symbiote.man.poznan.pl:8100/

  ProxyPass        	/cloudCoreInterface/          	https://symbiote.man.poznan.pl:8101/
  ProxyPassReverse 	/cloudCoreInterface/          	https://symbiote.man.poznan.pl:8101/

  ProxyPass        	/administration          	https://symbiote.man.poznan.pl:8250/administration
  ProxyPassReverse 	/administration          	https://symbiote.man.poznan.pl:8250/administration

  <Location /coreInterface/>
  	Order deny,allow
  	Deny from all
  
  	Allow from all

        ProxyHTMLURLMap / /coreInterface/
  </Location>


  <Location /cloudCoreInterface/>
  	Order deny,allow
  	Deny from all
  
  	Allow from all

        ProxyHTMLURLMap / /cloudCoreInterface/
  </Location>

  <Location /administration>
  	Order deny,allow
  	Deny from all
  
  	Allow from all
  </Location>

  <Directory />
        Options FollowSymLinks
        AllowOverride None
        Order deny,allow
        Allow from all
  </Directory>

  <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
  </Directory>

</VirtualHost>

